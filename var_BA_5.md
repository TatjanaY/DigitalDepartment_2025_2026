# 📈 Кейс. Бизнес-аналитика медиасервиса (видеостриминг): вовлечённость, удержание, LTV и окупаемость

## 🎯 Постановка задачи

Компания развивает **онлайн-сервис потокового видео**, предоставляющий доступ к фильмам и сериалам по подписке.

**Цель исследования** — определить:  
- какие **типы контента** формируют наибольшую вовлечённость;  
- как **активность аудитории** меняется во времени;  
- какие **пользовательские сегменты** наиболее ценны;  
- насколько **окупаются маркетинговые каналы**.

> ⚠️ **Важно**: датасеты **не связаны между собой идентификаторами**.  
> Их совместное использование допускается **только на концептуальном уровне**, через агрегаты, сегменты и аналитические допущения.

В рамках кейса необходимо провести **комплексный бизнес-анализ**, включающий расчёт ключевых метрик: **Retention, Conversion, LTV и ROI**.

**Результатом выполнения задания** должен стать **Jupyter Notebook**, содержащий код, расчёты, функции, визуализации и аналитические выводы.

---

## 📦 Используемые датасеты

В рамках кейса используются **три независимых датасета**, отражающих разные аспекты работы медиасервиса.

### 📁 Входные данные (обзор)

---

### 📄 Датасет 1 — Netflix Movies and TV Shows  
**Kaggle:** [https://www.kaggle.com/datasets/shivamb/netflix-shows](https://www.kaggle.com/datasets/shivamb/netflix-shows)  

**Тип данных:** каталог контента  

**Основные признаки:**  
- `show_id` — идентификатор контента  
- `type` — фильм или сериал  
- `title` — название  
- `country` — страна производства  
- `release_year` — год выпуска  
- `duration` — длительность  

**Назначение:**  
Используется как **справочник контента** для сегментации по типу, стране, году и анализа структуры каталога.  
⚠️ **Не содержит данных о просмотрах или пользователях**.

---

### 📄 Датасет 2 — MovieLens 1M Ratings  
**Источник:** [https://grouplens.org/datasets/movielens/1m/](https://grouplens.org/datasets/movielens/1m/)  

**Тип данных:** взаимодействия пользователей с контентом  

**Основные признаки:**  
- `UserID` — идентификатор пользователя  
- `MovieID` — идентификатор фильма  
- `Rating` — оценка (1–5)  
- `Timestamp` — время оценки  

**Назначение:**  
Используется как **прокси-данные активности**:  
- расчёт вовлечённости;  
- когортный анализ;  
- формирование пользовательских профилей;  
- оценка условного LTV.  
⚠️ **Оценка ≠ просмотр**, но принимается как признак вза interactions.

---

### 📄 Датасет 3 — Marketing Funnel Dataset  
**Kaggle:** [https://www.kaggle.com/datasets/olistbr/marketing-funnel-olist](https://www.kaggle.com/datasets/olistbr/marketing-funnel-olist)  

**Тип данных:** данные о привлечении лидов  

**Основные признаки:**  
- `lead_id` — идентификатор лида  
- `first_contact_date` — дата первого контакта  
- `origin` — канал привлечения  
- `landing_page_id` — точка входа  

**Назначение:**  
Используется для анализа **воронки привлечения**, расчёта **конверсии** и **оценки ROI**.  
⚠️ **Не содержит реальных затрат и связи с пользователями**. CAC и ROI — **условные/модельные**.

---

## 📝 Обязательные разделы итогового Jupyter Notebook

1. Предварительный анализ данных  
2. Предобработка данных  
3. Разработка функций для анализа данных  
4. Разработка функции для создания пользовательских профилей  
5. Разработка функций расчёта продуктовых и бизнес-метрик  
6. Визуализация продуктовых и бизнес-метрик  
7. Исследовательский анализ данных  
8. Маркетинг и анализ окупаемости  
9. Выводы  

---

## 🧩 Структура итогового Jupyter Notebook

### 1. 📊 Предварительный анализ данных  
**Цель раздела:** понять структуру, качество и ограничения данных.  

**Необходимо:**  
- вывести размеры таблиц (`shape`);  
- изучить типы данных (`info`);  
- оценить пропуски (особенно в `director`, `cast`);  
- проверить диапазон оценок (`Rating ∈ [1,5]`);  
- кратко описать особенности каждого датасета.  

**В конце раздела:** краткие выводы по данным и их пригодности к анализу.

---

### 2. 🧹 Предобработка данных  
**Цель раздела:** подготовить данные к расчёту метрик и анализу.  

**Необходимо:**  
- привести `Timestamp` и `first_contact_date` к `datetime`;  
- удалить дубликаты и аномалии;  
- агрегировать рейтинги по пользователям и периодам;  
- создать признаки активности (оценки в неделю);  
- задать **условные CAC** по каналам (например, `$1.0` для `paid`);  
- задать **коэффициент дохода** (например, `LTV = 0.3 × количество оценок`).  

**В конце раздела:** промежуточные выводы о готовности данных.

---

### 3. 🧠 Разработка функций для анализа данных  
**Цель раздела:** создать переиспользуемый аналитический инструментарий.  

**Ключевое правило:**  
> Все функции — расчёта метрик и визуализации — создаются здесь,  
> но **графики строятся и анализируются в отдельном разделе**.

**В этом разделе разрабатываются функции:**

1. **Для агрегации данных:**  
   - по пользователям;  
   - по контенту (`type`, `country`);  
   - по временным периодам.  

2. **Для фильтрации данных:**  
   - по датам;  
   - по типу контента;  
   - по маркетинговым каналам.  

3. **Для расчёта базовых метрик:**  
   - DAU / MAU;  
   - количество оценок;  
   - средняя оценка;  
   - условный доход.  

4. **Для формирования пользовательских профилей:**  
   - дата первой/последней оценки;  
   - количество оценок;  
   - средний рейтинг;  
   - lifetime (в днях);  
   - (опционально) RFM-сегментация.  

5. **Для расчёта продуктовых и бизнес-метрик:**  
   - Retention;  
   - Conversion;  
   - LTV (условный);  
   - ROI (оценочный).  

6. **Для визуализации:**  
   - line chart;  
   - bar chart;  
   - heatmap;  
   - funnel chart;  
   - scatter plot.  

**Структура раздела:**  
- краткое введение в модульность;  
- реализация функций с аннотациями;  
- перечень функций и их назначение.

---

### 4. 👤 Создание пользовательских профилей  
**Цель раздела:** сегментировать пользователей.  

**Необходимо:**  
- использовать разработанные функции;  
- рассчитать для каждого пользователя:  
  - дату первой оценки;  
  - дату последней оценки;  
  - количество оценок;  
  - средний рейтинг;  
  - lifetime;  
- выделить сегменты:  
  - «активные киноманы»;  
  - «случайные оценщики»;  
  - «бросившие».  

**В конце раздела:** выводы по выявленным сегментам.

---

### 5. 📐 Расчёт продуктовых и бизнес-метрик  

#### 5.1 🔁 Расчёт удержания (Retention)  
- формирование когорт по дате первой оценки;  
- расчёт retention rate по неделям/месяцам;  
- создание retention-матрицы (когорта × период жизни).  

#### 5.2 🔄 Расчёт конверсии  
- конверсия:  
  - лид → активный пользователь (сделавший ≥1 оценку);  
  - по каналам привлечения (`origin`);  
  - по типу контента (`Movie` / `TV Show`).  

#### 5.3 💰 Расчёт LTV и ROI  
- LTV = `k × количество оценок` (условная модель);  
- CAC = заданное значение по каналу;  
- ROI = (LTV – CAC) / CAC **на основе модельных допущений**.  

> **Важно:** в этом разделе используются функции, но **визуализация переносится в раздел 6**.

---

### 6. 📉 Визуализация продуктовых и бизнес-метрик  
**Цель раздела:** визуально представить и интерпретировать результаты.  

**Визуализации:**  

1. **🔁 Retention**  
   - Heatmap: X — период жизни, Y — когорта, цвет — retention %;  
   - Line chart: X — время, Y — retention %, линии — когорты.  

2. **🔄 Conversion**  
   - Funnel chart: лид → активный пользователь;  
   - Bar chart: X — каналы, Y — conversion rate.  

3. **💰 LTV и ROI**  
   - Line chart: X — lifetime, Y — накопленный LTV по когортам;  
   - Bar chart: X — каналы, Y — ROI;  
   - Scatter plot: X — условный CAC, Y — LTV, цвет — канал.  

**В конце раздела:** выводы по визуальному анализу — лучшие каналы, устойчивые сегменты, риски оттока.

---

### 7. 🔍 Исследовательский анализ данных  
**Цель раздела:** выявить скрытые закономерности.  

**Необходимо:**  
- визуализировать распределение оценок (histogram, boxplot);  
- проанализировать активность по типу контента и стране;  
- исследовать связь между `release_year` и популярностью;  
- сравнить поведение новых и «ветеранских» пользователей.

---

### 8. 📣 Маркетинг и анализ окупаемости  

#### 8.1 💼 Анализ общей окупаемости бизнеса  
- суммарный условный LTV vs. общие маркетинговые затраты;  
- общий ROI;  
- интерпретация рентабельности.  

#### 8.2 📊 Анализ окупаемости по каналам привлечения  
- ROI по каждому каналу (`origin`);  
- сравнение эффективности;  
- выявление убыточных и прибыльных источников.  

#### 8.3 👥 Анализ окупаемости пользовательских сегментов  
- LTV и ROI по типу контента, активности;  
- выявление нерентабельных групп;  
- рекомендации по таргетингу и персонализации.  

**В конце раздела:** промежуточные выводы по маркетинговой стратегии.

---

### 9. 🧾 Выводы  
В финальном разделе необходимо:  
- сформулировать **ключевые бизнес-инсайты**;  
- определить **наиболее ценные сегменты пользователей и контента**;  
- оценить **эффективность маркетинговых каналов** (с учётом допущений);  
- предложить **рекомендации** по росту удержания, LTV и ROI;  
- указать **ограничения исследования** (оценки ≠ просмотры, отсутствие реальных затрат);  
- обозначить **направления для дальнейшего анализа** (прогноз оттока, рекомендательные системы, AB-тесты UI).

--- 
