# 📈 Анализ спортивной активности и здоровья населения

## 🎯 Постановка задачи

Организация здравоохранения, исследовательский центр или государственное агентство стремится понять, как **физическая активность, здоровье и социально-экономические условия** взаимосвязаны на уровне как отдельных людей, так и целых стран.

**Цель исследования** — определить:  
- какие **паттерны ежедневной активности** проявляются у пользователей фитнес-трекеров;  
- как **уровень физической активности населения** коррелирует с показателями здоровья (ожидаемая продолжительность жизни, ИМТ);  
- существует ли **статистическая связь между качеством жизни и состоянием здоровья** на макроуровне.

> ⚠️ **Важно**: датасеты охватывают **разные уровни агрегации** (индивидуальный, национальный) и **не связаны напрямую**.  
> Анализ проводится **параллельно по трём блокам**, с возможной **концептуальной интерпретацией** на этапе выводов.

В рамках кейса необходимо провести **многоуровневый анализ здоровья и активности**, включая расчёт ключевых метрик: **средняя активность, ИМТ, ожидаемая продолжительность жизни, индекс качества жизни, корреляции между физическим и социальным благополучием**.

**Результатом выполнения задания** должен стать **Jupyter Notebook**, содержащий код, расчёты, функции, визуализации и аналитические выводы.

---

## 📦 Используемые датасеты

В рамках кейса используются **три независимых датасета**, отражающих индивидуальную активность, здоровье населения и качество жизни стран.

### 📁 Входные данные (обзор)

---

### 📄 Датасет 1 — Fitbit Fitness Tracker Data  
**Kaggle:** [https://www.kaggle.com/datasets/arashnic/fitbit](https://www.kaggle.com/datasets/arashnic/fitbit)  

**Тип данных:** индивидуальная физическая активность  

**Основные признаки:**  
- `Date` — дата наблюдения  
- `Steps` — количество шагов  
- `Calories` — сожжённые калории  
- `Distance` — пройденное расстояние (км)  
- `SleepHours` — продолжительность сна (часы)  

**Назначение:**  
Используется для анализа **поведенческих паттернов**, выявления **суточных и недельных циклов активности**, а также **взаимосвязи между сном, движением и энергозатратами**.

---

### 📄 Датасет 2 — WHO Life Expectancy Data  
**Kaggle:** [https://www.kaggle.com/datasets/kumarajarshi/life-expectancy-who](https://www.kaggle.com/datasets/kumarajarshi/life-expectancy-who)  

**Тип данных:** национальные показатели здоровья  

**Основные признаки:**  
- `Country` — страна  
- `Year` — год  
- `LifeExpectancy` — ожидаемая продолжительность жизни  
- `BMI` — средний индекс массы тела населения  
- `Alcohol` — среднее потребление алкоголя  
- `PhysicalActivity` — уровень физической активности (%)  

**Назначение:**  
Позволяет анализировать **факторы, влияющие на здоровье населения**, и выявлять **корреляции между образом жизни и долголетием**.

---

### 📄 Датасет 3 — Countries Quality of Life Index 2020  
**Kaggle:** [https://www.kaggle.com/datasets/cityapiio/countries-quality-of-life-index-2020-year](https://www.kaggle.com/datasets/cityapiio/countries-quality-of-life-index-2020-year)  

**Тип данных:** агрегированные индексы качества жизни  

**Основные признаки:**  
- `Country` — страна  
- `QualityOfLifeIndex` — общий индекс качества жизни  
- `HealthCareIndex` — доступность и качество здравоохранения  
- `SafetyIndex` — уровень безопасности  
- `TrafficCommuteTimeIndex` — среднее время в пути  
- `CostOfLivingIndex` — стоимость жизни  

**Назначение:**  
Используется для **международного сравнения**, выявления **взаимосвязи между социальной инфраструктурой и физическим благополучием**.

---

## 📝 Обязательные разделы итогового Jupyter Notebook

1. Предварительный анализ данных  
2. Предобработка данных  
3. Разработка функций для анализа данных  
4. Разработка функции для формирования исследовательских метрик  
5. Разработка функций расчёта распределений и корреляций  
6. Визуализация ключевых выводов  
7. Исследовательский анализ данных  
8. Интерпретация взаимосвязей между активностью, здоровьем и качеством жизни  
9. Выводы  

---

## 🧩 Структура итогового Jupyter Notebook

### 1. 📊 Предварительный анализ данных  
**Цель раздела:** понять структуру, качество и ограничения данных.  

**Необходимо:**  
- вывести размеры таблиц (`shape`);  
- изучить типы данных (`info`);  
- оценить пропуски (особенно в `BMI`, `PhysicalActivity`, `SleepHours`);  
- проверить аномалии (например, `Steps > 100000`, `LifeExpectancy < 40`);  
- кратко описать особенности каждого датасета.  

**В конце раздела:** краткие выводы по данным и их пригодности к анализу.

---

### 2. 🧹 Предобработка данных  
**Цель раздела:** подготовить данные к расчёту метрик и визуализации.  

**Необходимо:**  
- привести `Date` и `Year` к числовому или временному формату;  
- унифицировать названия стран между датасетами 2 и 3;  
- обработать пропуски (медиана по стране или году);  
- удалить аномальные записи;  
- создать производные признаки:  
  - `day_of_week`, `is_weekend` (для Fitbit);  
  - `region` (по стране — Европа, Азия и др.).  

**В конце раздела:** промежуточные выводы о структуре и чистоте итогового датасета.

---

### 3. 🧠 Разработка функций для анализа данных  
**Цель раздела:** создать переиспользуемый аналитический инструментарий.  

**Ключевое правило:**  
> Все функции — расчёта метрик и визуализации — создаются здесь,  
> но **графики строятся и анализируются в отдельном разделе**.

**В этом разделе разрабатываются функции:**

1. **Для агрегации данных:**  
   - по дням недели / месяцам (Fitbit);  
   - по странам / регионам (WHO, Quality of Life).  

2. **Для фильтрации данных:**  
   - по порогу активности;  
   - по уровню дохода (если доступен);  
   - по годам.  

3. **Для расчёта базовых метрик:**  
   - средние `Steps`, `Calories`, `SleepHours`;  
   - медианный `BMI` и `LifeExpectancy`;  
   - средние индексы качества жизни.  

4. **Для формирования профилей:**  
   - «активные пользователи» vs «малоподвижные»;  
   - «страны с высоким здоровьем» vs «регионы риска».  

5. **Для расчёта корреляций:**  
   - `Steps` vs `SleepHours`;  
   - `PhysicalActivity` vs `LifeExpectancy`;  
   - `HealthCareIndex` vs `QualityOfLifeIndex`.  

6. **Для визуализации:**  
   - line chart;  
   - bar chart;  
   - scatter plot;  
   - heatmap.  

**Структура раздела:**  
- краткое введение в многоуровневую аналитику здоровья;  
- реализация функций с аннотациями;  
- перечень функций и их назначение.

---

### 4. 🏃 Формирование исследовательских метрик  

#### 4.1 📱 Fitbit (индивидуальный уровень)  
- среднее количество шагов по дням недели;  
- распределение `Calories` и `SleepHours`;  
- корреляция между сном и активностью.  

#### 4.2 🌍 WHO (национальный уровень)  
- средний `BMI` и `LifeExpectancy` по регионам;  
- динамика `PhysicalActivity` по годам;  
- связь между алкоголем и продолжительностью жизни.  

#### 4.3 🏙️ Quality of Life (макроуровень)  
- топ-10 стран по `QualityOfLifeIndex`;  
- корреляционная матрица индексов;  
- сравнение `HealthCareIndex` и `SafetyIndex`.

---

### 5. 🔗 Анализ распределений и корреляций  

#### 5.1 Индивидуальный уровень  
- зависимость сна от дня недели;  
- сезонность активности.  

#### 5.2 Национальный уровень  
- связь `PhysicalActivity` и `BMI`;  
- влияние здравоохранения на долголетие.  

#### 5.3 Макроуровень  
- корреляция между безопасностью и качеством жизни;  
- роль транспортного времени в восприятии комфорта.

---

### 6. 📉 Визуализация ключевых выводов  
**Цель раздела:** визуально представить и интерпретировать результаты.  

**Визуализации:**  

1. **📱 Fitbit**  
   - Line chart: средние `Steps` по дням недели;  
   - Scatter plot: X — `SleepHours`, Y — `Calories`.  

2. **🌍 WHO**  
   - Bar chart: `LifeExpectancy` по регионам;  
   - Scatter plot: X — `PhysicalActivity`, Y — `BMI`.  

3. **🏙️ Quality of Life**  
   - Heatmap: корреляции между всеми индексами;  
   - Bar chart: топ-10 стран по качеству жизни.  

**В конце раздела:** выводы по визуальному анализу — ключевые зависимости, аномалии, неожиданные связи.

---

### 7. 🔍 Исследовательский анализ данных  
**Цель раздела:** выявить скрытые закономерности.  

**Необходимо:**  
- исследовать «парадокс активности» (высокая активность, но низкий сон);  
- сравнить страны с высоким `HealthCareIndex`, но низким `PhysicalActivity`;  
- проверить гипотезу: «чем выше качество жизни — тем больше физическая активность населения».

---

### 8. 🌐 Интерпретация взаимосвязей между активностью, здоровьем и качеством жизни  
**Цель раздела:** перевести данные в рекомендации для политики и здравоохранения.  

**Необходимо:**  
- сформулировать **гипотезы о причинах паттернов** (культура, инфраструктура, климат);  
- предложить **меры по повышению активности**:  
  - развитие пешеходных зон;  
  - программы корпоративного wellness;  
  - интеграция фитнес-трекеров в систему здравоохранения;  
- оценить **потенциал использования таких данных** в профилактике хронических заболеваний.

---

### 9. 🧾 Выводы  
В финальном разделе необходимо:  
- сформулировать **ключевые инсайты** по каждому уровню анализа;  
- определить **факторы, наиболее сильно влияющие на здоровье и активность**;  
- предложить **практические рекомендации** для:  
  - фитнес-индустрии;  
  - министерств здравоохранения;  
  - городских администраций;  
- указать **ограничения исследования** (самоотчётность, отсутствие данных о питании, различия в методологиях сбора);  
- обозначить **направления для дальнейшего анализа** (интеграция с данными wearables, прогноз заболеваемости, A/B-тесты программ мотивации).

---