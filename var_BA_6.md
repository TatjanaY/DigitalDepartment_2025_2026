# 📈 Кейс. Бизнес-аналитика фитнес-приложения: вовлечённость, удержание, LTV и ROI

## 🎯 Постановка задачи

Компания разрабатывает **мобильное фитнес-приложение**, предлагающее трекинг активности, персональные тренировки, мотивационные цели и прогресс-аналитику.  
Сервис стремится понять, кто из пользователей наиболее ценен, как развивается их вовлечённость во времени и какие маркетинговые каналы приносят окупаемый трафик.

**Цель исследования** — определить:  
- какие пользовательские сегменты демонстрируют наибольшую активность и удержание;  
- как изменяется уровень вовлечённости (шаги, калории, тренировки) со временем;  
- какие поведенческие паттерны коррелируют с долгосрочной лояльностью;  
- насколько окупаются маркетинговые инвестиции (на основе условных допущений).

В рамках кейса необходимо провести **комплексный бизнес-анализ** на основе **трёх датасетов фитнес-активности**, включающий расчёт ключевых продуктовых и маркетинговых метрик: **Retention, Conversion, LTV и ROI**.

**Результатом выполнения задания** должен стать **Jupyter Notebook**, содержащий код, расчёты, функции, визуализации и аналитические выводы.

---

## 📦 Используемые датасеты

В рамках кейса используются **три датасета**, отражающих физическую активность, сон и тренировочный прогресс пользователей.

### 📁 Входные данные (обзор)

---

### 📄 Датасет 1 — Fitbit Fitness Tracker Data  
**Kaggle:** [https://www.kaggle.com/datasets/nurudeenabdulsalaam/fitbit-fitness-tracker-data](https://www.kaggle.com/datasets/nurudeenabdulsalaam/fitbit-fitness-tracker-data)  

**Тип данных:** ежедневная активность пользователей  

**Основные признаки:**  
- `id` — уникальный пользователь  
- `activitydate` — дата активности  
- `totalsteps` — количество шагов  
- `veryactiveminutes` — минуты высокой активности  
- `calories` — сожжённые калории  
- также: данные по сну, пульсу, дистанции  

**Назначение:**  
Анализ **ежедневной вовлечённости**, **поведенческих паттернов** и формирование **базовых пользовательских профилей**.

---

### 📄 Датасет 2 — Fitbit Daily Activity (Mobius)  
**Kaggle:** [https://www.kaggest.com/datasets/arashnic/fitbit](https://www.kaggle.com/datasets/arashnic/fitbit)  

**Тип данных:** агрегированные ежедневные метрики  

**Основные файлы:**  
- `dailyActivity_merged.csv` — шаги, дистанция, активность  
- `sleepDay_merged.csv` — качество и продолжительность сна  
- `dailySteps_merged.csv` — шаги по дням  

**Назначение:**  
Дополнительный источник для **когортного анализа**, **retention** и изучения связи между **активностью и сном**.

---

### 📄 Датасет 3 — Gym Exercise Progress Dataset  
**Kaggle:** [https://www.kaggle.com/datasets/niharika41298/gym-exercise-data](https://www.kaggle.com/datasets/niharika41298/gym-exercise-data)  

**Тип данных:** тренировочный прогресс и параметры здоровья  

**Основные признаки:**  
- `date` — дата записи  
- `steps`, `calories`, `workout_minutes` — параметры активности  
- `weight_kg` — вес пользователя  
- дополнительные метрики: ИМТ, частота тренировок  

**Назначение:**  
Используется для **сегментации по целям** (похудение, набор массы), **анализа долгосрочного прогресса** и **LTV на основе устойчивости привычек**.

> ⚠️ **Важно:** Ни один из датасетов **не содержит данных о маркетинговых каналах или затратах**. Для расчёта **ROI/CAC** слушатель должен:  
> - ввести **условные каналы привлечения** (например, `paid`, `organic`, `referral`);  
> - назначить **условные затраты** (например, `$1.2` на пользователя из `paid`);  
> - интерпретировать **LTV как функцию от активности** (например, `LTV = 0.01 × суммарные шаги`).

---

## 📝 Обязательные разделы итогового Jupyter Notebook

1. Предварительный анализ данных  
2. Предобработка данных  
3. Разработка функций для анализа данных  
4. Разработка функции для создания пользовательских профилей  
5. Разработка функций расчёта продуктовых и бизнес-метрик  
6. Визуализация продуктовых и бизнес-метрик  
7. Исследовательский анализ данных  
8. Маркетинг и анализ окупаемости  
9. Выводы  

---

## 🧩 Структура итогового Jupyter Notebook

### 1. 📊 Предварительный анализ данных  
**Цель раздела:** понять структуру, качество и ограничения данных.  

**Необходимо:**  
- вывести размеры таблиц (`shape`);  
- изучить типы данных (`info`);  
- оценить пропуски (особенно в сне и весе);  
- проверить аномалии (например, 500 000 шагов за день);  
- кратко описать особенности каждого датасета.  

**В конце раздела:** краткие выводы по пригодности данных к анализу.

---

### 2. 🧹 Предобработка данных  
**Цель раздела:** подготовить данные к расчёту метрик и объединению.  

**Необходимо:**  
- привести все даты (`activitydate`, `date`) к формату `datetime`;  
- удалить аномальные записи (например, `totalsteps > 100000`);  
- обработать пропущенные значения (интерполяция или удаление);  
- агрегировать данные по `id` и дате;  
- объединить таблицы по `id` и временной шкале;  
- создать единый `user_id` и профиль активности.  

**В конце раздела:** промежуточные выводы о структуре и целостности итогового датасета.

---

### 3. 🧠 Разработка функций для анализа данных  
**Цель раздела:** создать переиспользуемый аналитический инструментарий.  

**Ключевое правило:**  
> Все функции — расчёта метрик и визуализации — создаются здесь,  
> но **графики строятся и анализируются в отдельном разделе**.

**В этом разделе разрабатываются функции:**

1. **Для агрегации данных:**  
   - по пользователям;  
   - по временным периодам (день / неделя / месяц).  

2. **Для фильтрации данных:**  
   - по датам;  
   - по уровням активности (`high`, `medium`, `low`);  
   - по наличию сна / тренировок.  

3. **Для расчёта базовых метрик:**  
   - DAU / MAU;  
   - среднее количество шагов в день;  
   - средняя продолжительность активности.  

4. **Для формирования пользовательских профилей:**  
   - дата первой активности;  
   - дата последней активности;  
   - суммарная активность (шаги, минуты, калории);  
   - lifetime (в днях);  
   - (опционально) RFM-сегментация.  

5. **Для расчёта продуктовых и бизнес-метрик:**  
   - Retention;  
   - Conversion (в активного пользователя);  
   - LTV (условный);  
   - ROI (условный).  

6. **Для визуализации:**  
   - line chart;  
   - bar chart;  
   - heatmap;  
   - scatter plot.  

**Структура раздела:**  
- краткое введение в модульность;  
- реализация функций с аннотациями;  
- перечень функций и их назначение.

---

### 4. 👤 Создание пользовательских профилей  
**Цель раздела:** сегментировать пользователей фитнес-приложения.  

**Необходимо:**  
- использовать разработанные функции;  
- рассчитать для каждого пользователя:  
  - дату первой активности;  
  - дату последней активности;  
  - суммарные шаги / калории / минуты;  
  - lifetime;  
- при желании реализовать **RFM-сегментацию** и выделить:  
  - «энтузиастов» (высокая частота + высокая активность);  
  - «бросивших» (раннее отключение);  
  - «стабильных пользователей».  

**В конце раздела:** выводы по созданным сегментам.

---

### 5. 📐 Расчёт продуктовых и бизнес-метрик  

#### 5.1 🔁 Расчёт удержания (Retention)  
- формирование когорт по дате первой активности;  
- расчёт retention rate по неделям/месяцам;  
- создание retention-матрицы (когорта × период жизни).  

#### 5.2 🔄 Расчёт конверсии  
- конверсия:  
  - в активного пользователя (например, ≥3 дней активности за неделю);  
  - по типу активности (только шаги vs. шаги + тренировки);  
  - (условно) по маркетинговым каналам.  

#### 5.3 💰 Расчёт LTV и ROI  
- LTV = `k × суммарная активность` (например, `k = 0.005`);  
- условный CAC по каналу (например, `$0.8` для `paid`);  
- ROI = (LTV – CAC) / CAC.  

> **Важно:** в этом разделе используются функции, но **визуализация переносится в раздел 6**.

---

### 6. 📉 Визуализация продуктовых и бизнес-метрик  
**Цель раздела:** визуально представить и интерпретировать результаты.  

**Визуализации:**  

1. **🔁 Retention**  
   - Heatmap: X — период жизни, Y — когорта, цвет — retention %;  
   - Line chart: X — время, Y — retention %, линии — когорты.  

2. **🔄 Conversion**  
   - Bar chart: X — сегменты активности, Y — conversion rate;  
   - Stacked bar chart: X — недели, Y — доля активных пользователей.  

3. **💰 LTV и ROI**  
   - Line chart: X — lifetime, Y — накопленный LTV по когортам;  
   - Bar chart: X — условные каналы, Y — ROI;  
   - Scatter plot: X — условный CAC, Y — LTV, цвет — сегмент.  

**В конце раздела:** выводы по визуальному анализу — лучшие сегменты, тенденции оттока, эффективность каналов.

---

### 7. 🔍 Исследовательский анализ данных  
**Цель раздела:** выявить поведенческие закономерности.  

**Необходимо:**  
- визуализировать распределение шагов и калорий;  
- проанализировать связь между сном и дневной активностью;  
- исследовать сезонность активности (например, январь vs. июль);  
- сравнить поведение «новичков» и «ветеранов».

---

### 8. 📣 Маркетинг и анализ окупаемости  

#### 8.1 💼 Анализ общей окупаемости бизнеса  
- суммарный условный LTV vs. общие маркетинговые затраты;  
- общий ROI;  
- интерпретация рентабельности.  

#### 8.2 📊 Анализ окупаемости по каналам привлечения  
- ROI по условным каналам (`paid`, `organic`, `referral`);  
- сравнение эффективности;  
- выявление убыточных источников.  

#### 8.3 👥 Анализ окупаемости пользовательских сегментов  
- LTV и ROI по уровням активности и целям;  
- выявление нерентабельных групп;  
- рекомендации по таргетингу (например, фокус на «энтузиастов»).  

**В конце раздела:** промежуточные выводы по маркетинговой стратегии.

---

### 9. 🧾 Выводы  
В финальном разделе необходимо:  
- сформулировать **ключевые бизнес-инсайты**;  
- определить **наиболее ценные сегменты пользователей**;  
- оценить **эффективность маркетинговых каналов** (на основе условных допущений);  
- предложить **рекомендации** по росту удержания, вовлечённости и LTV;  
- указать **ограничения исследования** (отсутствие реальных маркетинговых данных, самоотчётность);  
- обозначить **направления для дальнейшего анализа** (прогноз оттока, персонализация тренировок, AB-тесты мотивационных уведомлений).

--
